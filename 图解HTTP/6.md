## 图解 HTTP 笔记（六）——HTTP 首部

> 本章主要讲解了 HTTP 首部的结构，已经首部中各字段的用法。

### 一、HTTP 报文首部

![httpstructure](./pics/httpstructure.png)

上图是 HTTP 请求报文的结构。

HTTP 请求报文由方法、URI、HTTP 版本、HTTP 首部字段等组成。

请求报文首部信息实例：

```
GET / HTTP/1.1
Host: hackr.jp
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/2010010
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*; q=0
Accept-Language: ja,en-us;q=0.7,en;q=0.3
Accept-Encoding: gzip, deflate
DNT: 1
Connection: keep-alive
If-Modified-Since: Fri, 31 Aug 2007 02:02:20 GMT
If-None-Match: "45bae1-16a-46d776ac"
Cache-Control: max-age=0
```

HTTP 响应报文由 HTTP 版本、状态码（数字和原因短语）、HTTP 首部字段三部分组成。

下图是 HTTP 响应报文结构：

![httpresstructure](./pics/httpresstructure.png)

响应报文的首部实例：

```
HTTP/1.1 304 Not Modified
Date: Thu, 07 Jun 2012 07:21:36 GMT
Server: Apache
Connection: close
Etag: "45bae1-16a-46d776ac"
```

### 二、HTTP 首部字段

#### 2.1 HTTP 首部字段结构

HTTP 首部字段传递重要信息，其结构基本如下：

```
首部字段名：字段值
```

例如：

```
Content-Type：text/html
```

另外，有些首部字段可以有多个值，如下所示：

```
Keep-Alive：timeout=15，max=100
```

#### 2.2 HTTP 首部字段类型

HTTP 首部字段根据实际用途被分为四种类型。

* `通用首部字段`：请求报文和响应报文都会使用到的首部字段。
* `请求首部字段`：从客户端向服务端发送请求报文时使用的首部。补充了请求的附加内容、客户端信息、响应内容相关优先级的信息。
* `响应首部字段`：从服务端向客户端发送响应报文时的首部。补充了响应的附加内容，也会要求客户端附加的内容信息。
* `实体首部字段`：针对请求报文和响应报文的实体部分使用的首部。补充了资源内容更新时间等与实体内容相关的信息。

#### 2.3 HTTP 首部字段一览

##### 2.3.1 通用首部字段

| 首部字段名        | 说明                       |
| ----------------- | -------------------------- |
| Cache-Control     | 控制缓存的行为             |
| Connection        | 逐跳首部、连接的管理       |
| Date              | 创建报文的日期时间         |
| Pragma            | 报文指令                   |
| Trailer           | 报文末尾的首部一览         |
| Transfer-Encoding | 指定报文主体的传输编码方式 |
| Upgrade           | 升级为其他协议             |
| Via               | 代理服务器的相关信息       |
| Warning           | 错误通知                   |

